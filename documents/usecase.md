# 인공지능 기반 뉴스 분석 웹 서비스 유스케이스 문서

## 1. 액터 정의 (Actor Definitions)

이 섹션에서는 서비스와 상호작용하는 주체들을 정의합니다.

-   **주요 액터 (Primary Actors)**:

    -   **사용자**: 서비스를 이용하는 모든 개인. (비회원 사용자, 회원 사용자)
    -   **AI 시스템**: 뉴스 분석 기능을 수행하는 시스템 내부의 인공지능 모듈.

-   **보조 액터 (Secondary Actors)**:
    -   **네이버 검색 API**: 뉴스 기사 검색을 위해 외부와 연동되는 시스템.
    -   **Google Gemini**: 뉴스 분석을 위해 외부와 연동되는 인공지능 모델.
    -   **데이터베이스 (PostgreSQL)**: 모든 서비스 데이터를 저장하고 관리하는 시스템.

## 2. 유스케이스 시나리오 (Use Case Scenarios)

서비스의 핵심 기능별로 주요 유스케이스를 간략하게 제시합니다.

1.  **UC1: 새로운 뉴스 검색 및 결과 조회**

    -   **설명**: 사용자가 키워드를 입력하여 최신 뉴스 기사를 검색하고 그 결과를 조회합니다.
    -   **주요 액터**: 사용자
    -   **관련 액터**: 네이버 검색 API, 데이터베이스

2.  **UC2: 뉴스 분석 요청 및 결과 확인**

    -   **설명**: 사용자가 선택한 뉴스 기사들에 대해 AI 기반 분석을 요청하고 그 결과를 확인합니다.
    -   **주요 액터**: 사용자, AI 시스템
    -   **관련 액터**: Google Gemini, 데이터베이스

3.  **UC3: 회원가입**

    -   **설명**: 비회원 사용자가 서비스 회원으로 가입합니다.
    -   **주요 액터**: 사용자
    -   **관련 액터**: 데이터베이스

4.  **UC4: 로그인**

    -   **설명**: 회원 사용자가 서비스에 로그인하여 개인화된 기능을 이용합니다.
    -   **주요 액터**: 사용자
    -   **관련 액터**: 데이터베이스

5.  **UC5: 나의 검색 기록 재조회**

    -   **설명**: 로그인한 회원 사용자가 과거에 저장된 자신의 뉴스 검색 기록 목록을 조회하고 상세 내용을 확인합니다.
    -   **주요 액터**: 사용자
    -   **관련 액터**: 데이터베이스

6.  **UC6: 나의 분석 기록 재조회**
    -   **설명**: 로그인한 회원 사용자가 과거에 저장된 자신의 뉴스 분석 기록 목록을 조회하고 상세 내용을 확인합니다.
    -   **주요 액터**: 사용자
    -   **관련 액터**: 데이터베이스

## 3. 주요 단계 (Main Steps)

각 유스케이스의 핵심적인 흐름을 간략하게 설명합니다.

-   **UC1: 새로운 뉴스 검색 및 결과 조회**

    1.  사용자, 메인 페이지에서 키워드 입력 후 검색 실행.
    2.  시스템, 네이버 API 호출 (최대 100건) 및 DB 저장.
    3.  시스템, `/search` 페이지로 이동하여 검색 결과 표시 (초기 20건).
    4.  사용자, 뉴스 목록 필터링 및 '더 보기'를 통해 나머지 뉴스 로드 (최대 80건).

-   **UC2: 뉴스 분석 요청 및 결과 확인**

    1.  사용자, `/search` 또는 `/my-page/search/{search_id}` 페이지에서 뉴스 선택.
    2.  사용자, 분석 종류 선택 및 분석 요청.
    3.  시스템, 분석 결과 페이지로 이동 및 AI 분석 시작 (로딩 표시).
    4.  시스템, 분석 완료 후 결과 표시.

-   **UC3: 회원가입**

    1.  사용자, 회원가입 페이지 접속.
    2.  사용자, 이메일/비밀번호 입력 후 회원가입 요청.
    3.  시스템, 입력 유효성 검사 및 회원 정보 DB 저장.
    4.  시스템, 회원가입 성공 알림.

-   **UC4: 로그인**

    1.  사용자, 로그인 페이지 접속.
    2.  사용자, 이메일/비밀번호 입력 후 로그인 요청.
    3.  시스템, 사용자 인증 및 세션 생성.
    4.  시스템, 로그인 성공 후 페이지 이동.

-   **UC5: 나의 검색 기록 재조회**

    1.  사용자, 마이 페이지 접속 후 '나의 검색 기록 보기' 선택.
    2.  시스템, `/my-page/search` 페이지로 이동하여 검색 기록 목록 표시.
    3.  사용자, 특정 검색 기록 선택.
    4.  시스템, `/my-page/search/{search_id}` 페이지로 이동하여 과거 검색 결과 표시.

-   **UC6: 나의 분석 기록 재조회**
    1.  사용자, 마이 페이지 접속 후 '나의 분석 기록 보기' 선택.
    2.  시스템, `/my-page/analysis` 페이지로 이동하여 분석 기록 목록 표시.
    3.  사용자, 특정 분석 기록 선택.
    4.  시스템, `/my-page/analysis/{analysis_id}` 페이지로 이동하여 과거 분석 결과 표시.

## 4. 예외 처리 (Exception Handling)

각 유스케이스에서 발생할 수 있는 주요 예외 상황과 시스템의 대응 방안을 간략히 설명합니다.

-   **API 호출 실패**: 네이버 검색 API 또는 Google Gemini 호출 시 네트워크 오류, 제한 초과, 응답 오류 발생.

-   **DB 오류**: 데이터 저장, 조회, 업데이트 시 DB 연결 오류, 데이터 무결성 오류 발생.

-   **사용자 입력 오류**: 필수 입력 누락, 형식 불일치, 중복 아이디 등 유효성 검사 실패.

-   **AI 분석 오류**: 분석 중 예상치 못한 문제 발생으로 분석 실패.

-   **네트워크 연결 끊김**: 사용자 또는 서버 측의 네트워크 문제.

## 5. 포괄적인 액터 정의 (Comprehensive Actor Definitions)

각 액터의 역할, 목표, 특징을 상세하게 설명합니다.

-   **사용자 (User)**:

    -   **비회원 사용자**:
        -   **역할**: 서비스 탐색, 새로운 키워드 검색 및 실시간 결과 조회, 뉴스 분석 요청 및 즉시 결과 확인.
        -   **목표**: 특정 키워드에 대한 최신 뉴스 및 AI 분석을 통해 즉각적인 인사이트 획득.
        -   **특징**: 검색/분석 기록이 영구적으로 저장되지 않으며, 페이지 새로고침 시 데이터가 손실됨.
    -   **회원 사용자**:
        -   **역할**: 비회원 기능에 더해 회원가입, 로그인, 마이 페이지를 통한 과거 검색/분석 기록 재조회 및 관리.
        -   **목표**: 시간에 구애받지 않고 자신의 관심사에 대한 뉴스 및 분석 기록을 축적하고 활용.
        -   **특징**: 개인화된 서비스 경험 가능, 기록 영구 저장 및 재조회 가능.

-   **AI 시스템**:

    -   **역할**: 사용자가 선택한 뉴스 기사들에 대해 지정된 4가지 종류의 AI 분석(예: 요약, 감성 분석, 키워드 추출, 연관성 분석)을 수행.
    -   **목표**: 빠르고 정확하게 뉴스 데이터를 분석하여 사용자에게 유의미한 인사이트 제공.
    -   **특징**: Google Gemini 모델을 활용하여 백그라운드에서 비동기적으로 분석 수행, 분석 진행 상황을 프론트엔드에 전달.

-   **네이버 검색 API**:

    -   **역할**: 사용자 키워드에 기반한 최신 뉴스 기사를 검색하고 데이터를 제공.
    -   **목표**: 서비스에 필요한 실시간 뉴스 데이터를 안정적으로 공급.
    -   **특징**: API 호출 횟수 제한이 있으므로, 불필요한 중복 호출을 최소화하는 백엔드 로직이 중요.

-   **Google Gemini**:

    -   **역할**: AI 시스템의 핵심 구성 요소로, 자연어 처리 및 이해 능력을 기반으로 뉴스 분석을 수행.
    -   **목표**: 다양한 분석 종류에 맞춰 뉴스 텍스트에서 유의미한 정보를 추출하고 가공.
    -   **특징**: API를 통해 연동되며, 분석 요청에 대한 응답을 AI 시스템으로 반환.

-   **데이터베이스 (PostgreSQL)**:
    -   **역할**: 뉴스 기사 정보, 사용자 정보, 검색 기록, 분석 결과 등 서비스의 모든 데이터를 영구적으로 저장.
    -   **목표**: 데이터의 안정성, 무결성, 일관성 유지 및 효율적인 데이터 접근 제공.
    -   **특징**: 관계형 데이터베이스로, 복잡한 쿼리 및 트랜잭션 관리에 용이.

## 6. 상세 유스케이스 시나리오 (Detailed Use Case Scenarios)

### 6.1. UC1: 새로운 뉴스 검색 및 결과 조회

-   **사용자 목표**: 특정 키워드에 대한 최신 뉴스 기사를 검색하고 목록을 확인하고 싶다.
-   **가치 제안**: 수많은 뉴스 속에서 관심 키워드와 관련된 최신 정보를 빠르게 찾아볼 수 있다.

### 6.2. UC2: 뉴스 분석 요청 및 결과 확인

-   **사용자 목표**: 선택한 뉴스들에 대해 AI 기반의 심층 분석을 수행하고, 그 결과를 통해 새로운 인사이트를 얻고 싶다.
-   **가치 제안**: 방대한 뉴스 데이터를 AI가 대신 분석하여, 직접 파악하기 어려운 추세나 연관성 등의 정보를 시각적으로 쉽게 이해할 수 있다.

### 6.3. UC3: 회원가입

-   **사용자 목표**: 서비스에 회원으로 가입하여 과거 검색/분석 기록 저장 및 재조회 기능을 이용하고 싶다.
-   **가치 제안**: 개인화된 데이터 관리 및 지속적인 정보 추적을 통해 서비스 활용도를 높일 수 있다.

### 6.4. UC4: 로그인

-   **사용자 목표**: 기존 회원 계정으로 로그인하여 자신의 저장된 기록에 접근하고 싶다.
-   **가치 제안**: 언제든 자신의 작업 기록에 접근하여 중단했던 작업을 이어가거나 과거 데이터를 다시 활용할 수 있다.

### 6.5. UC5: 나의 검색 기록 재조회 (회원 전용)

-   **사용자 목표**: 마이 페이지에서 과거에 검색했던 특정 키워드의 뉴스 검색 기록을 다시 확인하고 싶다.
-   **가치 제안**: 동일한 키워드라도 특정 시점의 뉴스 목록을 정확히 재확인하여 당시의 맥락을 파악할 수 있다.

### 6.6. UC6: 나의 분석 기록 재조회 (회원 전용)

-   **사용자 목표**: 마이 페이지에서 과거에 수행했던 AI 뉴스 분석 결과를 다시 확인하고 싶다.
-   **가치 제안**: 이전에 얻었던 인사이트를 다시 참조하거나, 다른 분석 종류를 적용해볼 수 있다.

## 7. 주요 단계 및 이벤트 흐름 (Main Steps and Flow of Events)

각 유스케이스별 상세 흐름을 기술합니다.

---

**UC1: 새로운 뉴스 검색 및 결과 조회**

-   **사전 조건**: 사용자가 서비스에 접속 가능한 상태.

-   **주요 흐름**:

    1.  **사용자**: 메인 페이지 (`/`)에 접속합니다.

    2.  **사용자**: 상단 검색창에 검색할 키워드 (예: "인공지능 발전")를 입력하고 검색 버튼을 클릭합니다.

    3.  **시스템**: 백엔드로 키워드 검색 요청을 전송합니다.

    4.  **시스템**: 백엔드는 데이터베이스에서 해당 키워드에 대해 **매우 최근(예: 1시간 이내)에 검색되어 저장된 최신 결과**가 있는지 확인합니다.

    5.  **시스템**:

        -   **대안 흐름 A1 (DB에 최신 결과 있음)**: DB에서 최신 검색 결과(최대 100건)를 가져옵니다.
        -   **대안 흐름 A2 (DB에 최신 결과 없음)**: 네이버 검색 API를 호출하여 최신 뉴스 기사를 가져옵니다. API 호출 시 **최대 100건의 뉴스 기사를 요청**합니다. API 호출 성공 시, 가져온 뉴스 기사 목록을 DB에 저장합니다.

    6.  **시스템**: 가져온 뉴스 목록 데이터(최대 100건)를 클라이언트에 전달하고, 사용자를 뉴스 검색 결과 페이지 (`/search`)로 이동시킵니다. 이 때, 초기에는 검색 결과 중 일부(예: 20건)만 표시합니다.

    7.  **사용자**: `/search` 페이지에서 초기 표시된 뉴스 목록을 확인합니다.

    8.  **사용자**: 뉴스 목록 상단 또는 하단에 있는 필터링 검색창에 단어(예: "윤리")를 입력하여 목록을 필터링합니다.

    9.  **시스템**: (클라이언트 측) 로드된 뉴스 데이터(최대 100건) 중 입력된 단어가 포함된 뉴스만 실시간으로 필터링하여 화면에 표시합니다. (URL 변경 없음)

    10. **사용자**: 뉴스 목록 하단의 '더 보기' 버튼을 클릭합니다.

    11. **시스템**: (클라이언트 측) **이미 로드되어 클라이언트 메모리에 있는 나머지 뉴스 데이터(최대 80건)를 분할하여** 화면에 추가로 표시합니다. ('더 보기' 기능은 한 번의 검색 요청으로 얻어진 **최대 100건의 결과를 분할하여 표시하는 역할**을 합니다.)

    12. **사용자**: 추가된 뉴스가 현재 목록에 이어서 표시되는 것을 확인합니다.

-   **예외 흐름**:
    -   **E1.1 (네이버 검색 API 호출 실패)**: 시스템이 네이버 검색 API 호출에 실패합니다 (네트워크 오류, API 제한 초과 등).
        -   **시스템**: 사용자에게 "뉴스 검색에 실패했습니다. 잠시 후 다시 시도해주세요." 메시지를 표시합니다. (선택적: 에러 로그 기록)
    -   **E1.2 (검색 결과 없음)**: 네이버 검색 API 또는 DB 조회 결과, 해당 키워드와 관련된 뉴스 기사가 전혀 없습니다.
        -   **시스템**: 사용자에게 "검색 결과가 없습니다." 메시지를 표시합니다.
-   **후처리 조건**:
    -   성공 시: 검색된 뉴스 기사 목록(최대 100건)이 `/search` 페이지에 표시되며, (회원 사용자의 경우) 검색 기록이 DB에 저장됨.

---

**UC2: 뉴스 분석 요청 및 결과 확인**

-   **사전 조건**: 사용자가 `/search` 또는 `/my-page/search/{search_id}` 페이지에서 뉴스 목록을 조회하고 있는 상태.

-   **주요 흐름**:

    1.  **사용자**: 뉴스 목록에서 분석하고자 하는 뉴스 기사들을 체크박스를 통해 선택합니다. (최소 1개 이상)

    2.  **사용자**: 분석 종류 선택 드롭다운(또는 라디오 버튼)에서 원하는 분석 종류 (예: "감성 분석")를 선택합니다.

    3.  **사용자**: '뉴스 분석' 버튼을 클릭합니다.

    4.  **시스템**: 선택된 뉴스 ID와 분석 종류를 백엔드로 전송하고, 즉시 사용자를 분석 결과 페이지 (`/analysis/{analysis_id}`)로 이동시킵니다.

    5.  **시스템**: `/analysis/{analysis_id}` 페이지에 "분석중..." 문구와 함께 스켈레톤 UI를 표시하여 분석 진행 중임을 알립니다.

    6.  **AI 시스템**: 백그라운드에서 Google Gemini를 활용하여 선택된 뉴스들에 대한 분석을 시작합니다.

    7.  **AI 시스템**: 분석이 완료되면 분석 결과(데이터, 시각화 정보 등)를 데이터베이스에 저장합니다.

    8.  **시스템**: 분석 완료 알림을 클라이언트에 전송합니다.

    9.  **시스템**: 클라이언트는 스켈레톤 UI를 실제 분석 결과로 대체하여 화면에 표시합니다.

-   **예외 흐름**:

    -   **E2.1 (선택된 뉴스 없음)**: 사용자가 뉴스 기사를 선택하지 않고 '뉴스 분석' 버튼을 클릭합니다.

        -   **시스템**: "분석할 뉴스를 1개 이상 선택해주세요." 알림 메시지를 표시합니다.

    -   **E2.2 (AI 분석 실패)**: Google Gemini 호출 실패, 분석 시간 초과, 분석 중 내부 오류 등으로 AI 분석이 실패합니다.

        -   **시스템**: `/analysis/{analysis_id}` 페이지에 "분석에 실패했습니다. 잠시 후 다시 시도하거나, 다른 뉴스를 선택해주세요." 메시지를 표시합니다. (선택적: 에러 로그 기록)

-   **후처리 조건**:

    -   성공 시: 분석 결과가 `/analysis/{analysis_id}` 페이지에 표시됩니다. (회원 사용자의 경우 분석 기록이 DB에 저장됨)

---

**UC3: 회원가입**

-   **사전 조건**: 사용자가 서비스에 접속 가능한 상태.

-   **주요 흐름**:

    1.  **사용자**: 메인 페이지 또는 로그인 페이지에서 '회원가입' 링크를 클릭하여 회원가입 페이지 (`/signup`)로 이동합니다.

    2.  **사용자**: 이메일 주소, 비밀번호, 비밀번호 확인을 입력하고 '회원가입' 버튼을 클릭합니다.

    3.  **시스템**: 입력된 정보의 유효성을 검사합니다 (이메일 형식, 비밀번호 길이/복잡도, 비밀번호 일치 여부).

    4.  **시스템**: 유효성 검사 통과 시, 입력된 이메일 주소가 이미 DB에 존재하는지 확인합니다.

    5.  **시스템**: 중복된 이메일이 아닐 경우, 사용자 정보를 해시된 비밀번호와 함께 DB에 저장합니다.

    6.  **시스템**: "회원가입이 완료되었습니다. 로그인 해주세요." 메시지를 표시하고 로그인 페이지 (`/login`)로 자동 이동시키거나 로그인 유도 버튼을 제공합니다.

-   **예외 흐름**:

    -   **E3.1 (입력 유효성 검사 실패)**: 필수 필드 누락, 잘못된 형식의 이메일, 비밀번호 규칙 불일치 등.

        -   **시스템**: 해당 입력 필드 아래에 구체적인 오류 메시지를 표시합니다 (예: "올바른 이메일 형식이 아닙니다.", "비밀번호는 8자 이상이어야 합니다.").

    -   **E3.2 (이메일 중복)**: 이미 가입된 이메일 주소를 입력했습니다.

        -   **시스템**: "이미 가입된 이메일 주소입니다." 메시지를 표시합니다.

    -   **E3.3 (DB 저장 실패)**: 데이터베이스 연결 문제 등으로 회원 정보 저장에 실패합니다.

        -   **시스템**: "회원가입에 실패했습니다. 잠시 후 다시 시도해주세요." 메시지를 표시합니다.

-   **후처리 조건**:

    -   성공 시: 사용자 정보가 DB에 저장되며, 로그인할 수 있는 상태가 됩니다.

---

**UC4: 로그인**

-   **사전 조건**: 사용자가 회원가입을 완료한 상태.

-   **주요 흐름**:

    1.  **사용자**: 메인 페이지 또는 회원가입 페이지에서 '로그인' 링크를 클릭하여 로그인 페이지 (`/login`)로 이동합니다.

    2.  **사용자**: 가입 시 사용한 이메일 주소와 비밀번호를 입력하고 '로그인' 버튼을 클릭합니다.

    3.  **시스템**: 입력된 이메일과 비밀번호를 DB에 저장된 사용자 정보와 대조하여 인증을 시도합니다.

    4.  **시스템**: 인증 성공 시, 사용자 세션을 생성하고 사용자를 메인 페이지 (`/`) 또는 마이 페이지 (`/my-page`)로 이동시킵니다.

-   **예외 흐름**:

    -   **E4.1 (잘못된 인증 정보)**: 이메일 또는 비밀번호가 일치하지 않습니다.

        -   **시스템**: "이메일 또는 비밀번호를 다시 확인해주세요." 메시지를 표시합니다.

    -   **E4.2 (계정 없음)**: 입력된 이메일 주소로 등록된 계정이 없습니다.

        -   **시스템**: "등록되지 않은 이메일 주소입니다. 회원가입을 먼저 해주세요." 메시지를 표시합니다.

    -   **E4.3 (DB/서버 오류)**: 로그인 처리 중 서버 또는 DB 오류가 발생합니다.

        -   **시스템**: "로그인에 실패했습니다. 잠시 후 다시 시도해주세요." 메시지를 표시합니다.

-   **후처리 조건**:

    -   성공 시: 사용자 세션이 활성화되고, 회원 전용 기능(마이 페이지)에 접근 가능해집니다.

---

**UC5: 나의 검색 기록 재조회 (회원 전용)**

-   **사전 조건**: 회원 사용자가 로그인한 상태.

-   **주요 흐름**:

    1.  **사용자**: 상단 내비게이션 바의 '마이 페이지' 링크를 클릭하여 마이 페이지 (`/my-page`)로 이동합니다.

    2.  **사용자**: 마이 페이지에서 '나의 검색 기록 보기' 링크를 클릭합니다.

    3.  **시스템**: 백엔드에서 해당 회원의 검색 기록 목록을 DB에서 가져와 클라이언트에 전달하고, 사용자를 나의 검색 기록 목록 페이지 (`/my-page/search`)로 이동시킵니다.

    4.  **사용자**: 검색 기록 목록에서 재조회하고 싶은 특정 검색 기록 (예: "오늘의 주식 뉴스 검색 (2025-06-15)")을 클릭합니다.

    5.  **시스템**: 백엔드에서 해당 `search_id`에 해당하는 과거 뉴스 목록을 DB에서 가져와 클라이언트에 전달하고, 사용자를 나의 검색 기록 상세 페이지 (`/my-page/search/{search_id}`)로 이동시킵니다.

    6.  **사용자**: 상세 페이지에서 과거에 검색했던 뉴스 목록을 확인하고, 필요시 뉴스 필터링 기능을 사용합니다.

-   **예외 흐름**:

    -   **E5.1 (검색 기록 없음)**: 해당 회원의 검색 기록이 아직 DB에 없습니다.

        -   **시스템**: 나의 검색 기록 목록 페이지에 "저장된 검색 기록이 없습니다. 새로운 검색을 시도해보세요." 메시지를 표시합니다.

    -   **E5.2 (기록 로드 오류)**: 특정 검색 기록 로드 중 DB 오류가 발생합니다.

        -   **시스템**: "검색 기록을 불러오는 데 실패했습니다. 다시 시도해주세요." 메시지를 표시합니다.

-   **후처리 조건**:

    -   성공 시: 과거 특정 시점의 뉴스 검색 결과가 `/my-page/search/{search_id}` 페이지에 표시됩니다.

---

**UC6: 나의 분석 기록 재조회 (회원 전용)**

-   **사전 조건**: 회원 사용자가 로그인한 상태.

-   **주요 흐름**:

    1.  **사용자**: 상단 내비게이션 바의 '마이 페이지' 링크를 클릭하여 마이 페이지 (`/my-page`)로 이동합니다.

    2.  **사용자**: 마이 페이지에서 '나의 분석 기록 보기' 링크를 클릭합니다.

    3.  **시스템**: 백엔드에서 해당 회원의 분석 기록 목록을 DB에서 가져와 클라이언트에 전달하고, 사용자를 나의 분석 기록 목록 페이지 (`/my-page/analysis`)로 이동시킵니다.

    4.  **사용자**: 분석 기록 목록에서 재조회하고 싶은 특정 분석 기록 (예: "주식 시장 감성 분석 (2025-06-15)")을 클릭합니다.

    5.  **시스템**: 백엔드에서 해당 `analysis_id`에 해당하는 과거 분석 결과를 DB에서 가져와 클라이언트에 전달하고, 사용자를 나의 분석 기록 상세 페이지 (`/my-page/analysis/{analysis_id}`)로 이동시킵니다.

    6.  **사용자**: 상세 페이지에서 과거에 수행했던 AI 분석 결과를 확인합니다.

-   **예외 흐름**:

    -   **E6.1 (분석 기록 없음)**: 해당 회원의 분석 기록이 아직 DB에 없습니다.

        -   **시스템**: 나의 분석 기록 목록 페이지에 "저장된 분석 기록이 없습니다. 새로운 뉴스를 분석해보세요." 메시지를 표시합니다.

    -   **E6.2 (기록 로드 오류)**: 특정 분석 기록 로드 중 DB 오류가 발생합니다.

        -   **시스템**: "분석 기록을 불러오는 데 실패했습니다. 다시 시도해주세요." 메시지를 표시합니다.

-   **후처리 조건**:

    -   성공 시: 과거 특정 시점의 뉴스 분석 결과가 `/my-page/analysis/{analysis_id}` 페이지에 표시됩니다.

## 8. 대안 흐름 및 엣지 케이스 (Alternative Flows and Edge Cases)

각 유스케이스에서 고려해야 할 추가적인 시나리오 및 특이 케이스를 기술합니다.

-   **UC1: 새로운 뉴스 검색 및 결과 조회**

    -   **A1 (DB에 최신 결과 있음)**: `7. 주요 단계`에 상세 설명. 불필요한 API 호출 방지.
    -   **E1.3 (클라이언트 측 네트워크 단절)**: 검색 요청 전송 중 또는 결과 수신 중 네트워크 연결이 끊김.
        -   **시스템**: "네트워크 연결을 확인해주세요." 메시지 표시.
    -   **E1.4 (긴 검색 시간)**: 검색 API 응답이 지연되거나, 처리할 뉴스 양이 많아 시간이 오래 걸림.
        -   **시스템**: 검색 중 로딩 스피너/메시지 표시. (만료 시간 설정 및 타임아웃 처리 고려)

-   **UC2: 뉴스 분석 요청 및 결과 확인**

    -   **A2.1 (분석 중 페이지 이탈 시)**: 사용자가 분석 진행 중인 페이지에서 다른 페이지로 이동합니다.
        -   **시스템**: 백그라운드 분석은 계속 진행됩니다. (회원인 경우 나중에 마이 페이지에서 결과 확인 가능, 비회원인 경우 결과 확인 불가.)
    -   **E2.3 (분석할 수 없는 뉴스 콘텐츠)**: 선택된 뉴스 기사의 본문 내용이 너무 짧거나, 특수문자만 있거나, AI 분석이 불가능한 형태일 경우.
        -   **시스템**: "선택된 뉴스 중 일부는 분석할 수 없습니다." 또는 "분석 가능한 뉴스 콘텐츠가 없습니다." 메시지 표시.

-   **UC3: 회원가입**

    -   **A3.1 (비밀번호 규칙 위반)**: 사용자에게 명확한 비밀번호 규칙(특수문자 포함 등)을 제시하고 실시간 유효성 검사 피드백 제공.

-   **UC4: 로그인**

    -   **A4.1 (로그인 상태 유지)**: '로그인 상태 유지' 체크박스를 제공하여 세션 만료 시에도 자동 로그인 또는 재인증을 최소화.
    -   **E4.4 (비밀번호 재설정)**: 사용자가 비밀번호를 잊어버린 경우.
        -   **시스템**: '비밀번호 찾기' 링크 제공 및 이메일 기반 재설정 프로세스 안내.

-   **UC5, UC6: 나의 기록 재조회**
    -   **A5/6.1 (기록 목록 필터링/정렬)**: 검색 키워드, 분석 종류, 날짜 범위 등으로 목록 필터링 및 정렬 기능 제공.
    -   **A5/6.2 (기록 삭제)**: 사용자가 특정 검색/분석 기록을 목록에서 삭제할 수 있는 기능 제공. (삭제 전 확인 메시지 포함)

## 9. 사전 조건 및 사후 조건 (Preconditions and Postconditions)

각 유스케이스 성공 시 달성되는 조건을 명시합니다.

-   **UC1: 새로운 뉴스 검색 및 결과 조회**

    -   **사전 조건**: 사용자가 서비스 웹 페이지에 접근 가능하고, 유효한 키워드를 입력함.
    -   **사후 조건**: 해당 키워드의 최신 뉴스 기사 목록(최대 100건)이 `/search` 페이지에 표시되며, (회원인 경우) 검색 기록이 DB에 저장됨.

-   **UC2: 뉴스 분석 요청 및 결과 확인**

    -   **사전 조건**: 사용자가 뉴스 목록에서 1개 이상의 뉴스를 선택하고 분석 종류를 선택함.
    -   **사후 조건**: AI 분석이 완료되어 결과가 `/analysis/{analysis_id}` 페이지에 표시되며, (회원인 경우) 분석 기록이 DB에 저장됨.

-   **UC3: 회원가입**

    -   **사전 조건**: 유효한 이메일 주소와 비밀번호를 입력함. 입력된 이메일이 DB에 존재하지 않음.
    -   **사후 조건**: 새로운 사용자 계정이 DB에 생성되고, 사용자는 로그인할 수 있는 상태가 됨.

-   **UC4: 로그인**

    -   **사전 조건**: 유효한 이메일과 비밀번호를 입력함. 해당 계정이 DB에 존재함.
    -   **사후 조건**: 사용자가 서비스에 성공적으로 로그인되고, 회원 전용 기능에 접근할 수 있는 세션이 생성됨.

-   **UC5: 나의 검색 기록 재조회**

    -   **사전 조건**: 회원 사용자가 로그인한 상태이며, DB에 조회할 검색 기록이 존재함.
    -   **사후 조건**: 요청된 `search_id`에 해당하는 과거 뉴스 검색 결과가 `/my-page/search/{search_id}` 페이지에 표시됨.

-   **UC6: 나의 분석 기록 재조회**
    -   **사전 조건**: 회원 사용자가 로그인한 상태이며, DB에 조회할 분석 기록이 존재함.
    -   **사후 조건**: 요청된 `analysis_id`에 해당하는 과거 뉴스 분석 결과가 `/my-page/analysis/{analysis_id}` 페이지에 표시됨.

## 10. 비즈니스 규칙 및 제약 사항 (Business Rules and Constraints)

서비스 운영과 관련된 중요한 규칙과 기술적 제약을 정의합니다.

-   **API 호출 제한**: 네이버 검색 API의 일일/시간당 호출 횟수 제한을 준수해야 합니다. (백엔드에서 캐싱 및 호출 제어 로직 필요)

-   **뉴스 검색 결과 제한**: 한 번의 새로운 키워드 검색 요청(UC1)으로 네이버 검색 API를 통해 조회되는 뉴스 기사 수는 **최대 100건으로 제한**됩니다. '더 보기' 기능은 이 100건의 데이터를 분할하여 표시하는 역할만 수행하며, 100건을 초과하는 추가 뉴스 기사 조회를 위해서는 새로운 검색을 다시 수행해야 합니다.

-   **회원/비회원 기능 차등**:

    -   비회원: 새로운 검색 및 즉시 분석 결과 확인만 가능. 검색/분석 기록은 세션 종료 또는 페이지 새로고침 시 손실됨.
    -   회원: 모든 기능 이용 가능. 검색/분석 기록이 사용자 계정에 귀속되어 영구 저장 및 재조회 가능.

-   **분석 종류 제한**: AI 분석은 기획된 4가지 종류로만 제공됩니다.

-   **데이터 저장 정책**: 비회원 데이터는 휘발성으로 처리되며, 회원 데이터는 특정 기간 동안 (정책에 따라 영구 또는 만료 기간 설정) DB에 보관됩니다.

-   **분석 처리 방식**: AI 분석은 사용자 요청 시 백그라운드에서 비동기적으로 처리되어야 합니다.

-   **최신 뉴스 우선**: `/search` 경로에서의 검색은 DB 캐시 활용을 최적화하되, 항상 사용자에게 최신 뉴스 기사를 제공하는 것을 우선합니다.

## 11. 예외 처리 절차 (Exception Handling Procedures)

각 유형의 예외 상황에 대한 구체적인 시스템 대응 방안을 설명합니다.

-   **네트워크 오류 (클라이언트-서버)**:
    -   사용자에게 명확한 메시지("네트워크 연결을 확인해주세요.")를 표시합니다.
    -   재시도 버튼을 제공하여 사용자가 수동으로 재요청할 수 있도록 합니다.
-   **외부 API 오류 (네이버 검색 API, Google Gemini)**:
    -   백엔드에서 API 응답 코드 및 오류 메시지를 확인합니다.
    -   일시적인 오류의 경우, 백오프(Back-off) 전략을 포함한 재시도 로직을 구현합니다.
    -   지속적인 오류 또는 API 제한 초과 시, 사용자에게 "서비스 이용이 어렵습니다. 잠시 후 다시 시도해주세요." 또는 "API 사용량이 초과되어 현재 검색/분석이 어렵습니다."와 같은 메시지를 표시하고, 내부 관리자에게 알림을 보냅니다.
    -   로그를 통해 오류 원인을 상세히 기록합니다.
-   **데이터베이스 오류**:
    -   데이터 읽기/쓰기 실패 시, 트랜잭션 롤백 및 재시도 로직을 고려합니다.
    -   사용자에게는 "데이터 처리 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요." 메시지를 표시합니다.
    -   모든 DB 오류는 상세한 로그와 함께 기록하고 관리자에게 알림을 보냅니다.
-   **사용자 입력 유효성 검사 오류**:
    -   프론트엔드와 백엔드 모두에서 입력 유효성 검사를 수행합니다.
    -   프론트엔드에서는 사용자 입력 즉시 시각적인 피드백(경고 메시지, 테두리 색상 변경 등)을 제공합니다.
    -   백엔드에서는 유효하지 않은 요청에 대해 적절한 HTTP 상태 코드(예: 400 Bad Request)와 오류 메시지를 반환합니다.
-   **AI 분석 시간 초과/실패**:
    -   분석 요청에 타임아웃을 설정합니다.
    -   분석 시간 초과 또는 실패 시, 분석 결과 페이지의 스켈레톤 UI를 유지한 채로 "분석에 실패했습니다. 다시 시도해주세요." 또는 "분석 시간이 너무 오래 걸립니다."와 같은 메시지를 표시합니다.
    -   분석 실패 원인에 대한 상세 로그를 기록하고, 분석 시스템의 상태를 모니터링합니다.

## 12. 사용자 인터페이스 고려 사항 (User Interface Considerations)

사용자 경험을 위한 UI/UX 측면의 주요 고려 사항을 기술합니다.

-   **반응형 디자인**: 모든 페이지는 데스크탑, 태블릿, 모바일 등 다양한 기기 및 화면 크기에서 최적화된 레이아웃과 기능을 제공해야 합니다. Tailwind CSS의 반응형 유틸리티를 적극 활용합니다.
-   **일관된 내비게이션**: 상단 바 내비게이션은 모든 페이지에서 일관된 위치와 형태로 제공되어 사용자에게 혼동을 주지 않아야 합니다.
-   **로딩 인디케이터**:
    -   새로운 검색 요청, 분석 요청 등 시간이 소요되는 작업에는 명확한 로딩 스피너나 메시지(`"검색 중..."`, `"분석중..."`)를 표시합니다.
    -   특히 AI 분석 중에는 스켈레톤 UI를 활용하여 콘텐츠 영역의 대략적인 형태를 미리 보여주어 사용자에게 시각적인 대기 경험을 제공합니다.
-   **입력 필드 피드백**: 검색창, 로그인/회원가입 폼 등 모든 입력 필드는 유효성 검사 실패 시 명확한 오류 메시지와 시각적 피드백을 제공해야 합니다.
-   **명확한 액션 버튼**: '검색', '뉴스 분석', '로그인', '회원가입' 등 주요 액션 버튼은 직관적인 레이블과 충분한 클릭/탭 영역을 확보해야 합니다.
-   **정보 조직화**: 뉴스 목록, 검색/분석 기록 목록, 분석 결과 등 복잡한 정보는 카드, 테이블, 목록, 그래프 등 적절한 UI 컴포넌트를 사용하여 시각적으로 명확하게 조직화해야 합니다.
-   **접근성 (Accessibility)**: 키보드 내비게이션, 스크린 리더 호환성(ARIA 속성), 충분한 색상 대비 등을 고려하여 모든 사용자가 서비스를 이용하는 데 불편함이 없도록 합니다.

## 13. 데이터 요구 사항 및 데이터 흐름 (Data Requirements and Data Flow)

서비스 내에서 필요한 데이터와 데이터가 흐르는 방식을 정의합니다.

-   **데이터 엔티티**:

    -   **사용자 (User)**: ID(PK), 이메일, 해시된 비밀번호, 회원가입 일자, 마지막 로그인 일자.
    -   **검색 기록 (SearchHistory)**: ID(PK), 사용자 ID(FK, 회원용), 키워드, 검색 일시, 저장된 뉴스 ID 목록 (참조), (비회원용 세션 ID 또는 임시 ID).
    -   **뉴스 기사 (NewsArticle)**: ID(PK), 제목, 본문, URL, 언론사, 발행일자, (필요시 이미지 URL 등). (네이버 검색 API 응답 필드 기반)
    -   **분석 결과 (AnalysisResult)**: ID(PK), 검색 기록 ID(FK), 분석 종류, 분석 요청 일시, 분석 완료 일시, 분석 내용 (JSON 또는 텍스트), (분석에 사용된 뉴스 ID 목록).

-   **데이터 흐름**:
    1.  **사용자 -> 프론트엔드**: 키워드 입력, 뉴스 선택, 분석 종류 선택, 로그인/회원가입 정보 입력.
    2.  **프론트엔드 -> 백엔드**:
        -   키워드 검색 요청 (클라이언트 상태 기반).
        -   선택된 뉴스 및 분석 종류를 포함한 분석 요청.
        -   로그인/회원가입 정보.
        -   과거 검색/분석 기록 조회 요청 (회원용).
    3.  **백엔드**:
        -   **네이버 검색 API 호출**: 검색 요청 시 최신 데이터가 DB에 없으면 API 호출.
        -   **Google Gemini 호출**: 분석 요청 시 AI 모델 호출.
        -   **데이터베이스 (PostgreSQL)**:
            -   검색 결과 저장 (새로운 검색 시).
            -   분석 결과 저장.
            -   사용자 정보 저장 (회원가입 시).
            -   사용자 인증 정보 조회 (로그인 시).
            -   과거 검색/분석 기록 및 관련 뉴스 데이터 조회 (마이 페이지).
    4.  **백엔드 -> 프론트엔드**:
        -   검색 결과 목록.
        -   분석 진행 상태 및 최종 분석 결과.
        -   로그인/회원가입 성공/실패 여부 및 메시지.
        -   과거 검색/분석 기록 목록 및 상세 데이터.
    5.  **프론트엔드**: 수신된 데이터를 파싱하여 UI에 표시.

## 14. 보안 및 개인 정보 보호 고려 사항 (Security and Privacy Considerations)

서비스의 보안 및 사용자 개인 정보 보호를 위한 핵심 사항을 정의합니다.

-   **사용자 인증 및 권한 관리**:
    -   **비밀번호 해싱**: 사용자 비밀번호는 데이터베이스에 평문으로 저장되지 않고, 강력한 해싱 알고리즘(예: bcrypt)을 사용하여 저장되어야 합니다.
    -   **세션 관리**: 안전한 세션 관리(예: 세션 ID 무작위 생성, 정기적 갱신, HTTPS를 통한 전송)를 통해 세션 하이재킹 공격을 방지합니다.
    -   **권한 분리**: 회원과 비회원의 기능 및 데이터 접근 권한을 명확히 분리하여, 비회원이 회원 전용 데이터에 접근할 수 없도록 합니다.
-   **데이터 암호화**:
    -   **전송 중 암호화 (In-transit Encryption)**: 모든 클라이언트-서버 통신은 HTTPS 프로토콜을 사용하여 암호화되어야 합니다.
    -   **저장 데이터 암호화 (At-rest Encryption)**: 민감한 사용자 정보(예: 이메일) 및 AI 분석 결과는 DB 저장 시 암호화를 고려할 수 있습니다.
-   **API 키 관리**: 네이버 검색 API 및 Google Gemini API 키는 클라이언트 측에 노출되어서는 안 되며, 백엔드 서버에서 안전하게 관리되고 호출되어야 합니다. 환경 변수 등으로 관리하여 코드에 직접 노출하지 않습니다.
-   **개인 정보 수집 최소화**: 서비스 운영에 필요한 최소한의 개인 정보(이메일, 비밀번호)만 수집하고, 그 외 정보는 수집하지 않습니다.
-   **비회원 데이터 처리**: 비회원의 검색 및 분석 결과는 영구 저장되지 않고, 세션 종료 시 자동으로 파기되도록 하여 개인 정보 보호를 강화합니다. (필요시 임시 세션 ID 기반의 최소한의 로그만 기록)
-   **보안 취약점 방지**: SQL Injection, XSS (Cross-Site Scripting), CSRF (Cross-Site Request Forgery) 등 일반적인 웹 보안 취약점에 대한 방어 기법을 적용합니다. (예: 입력 값 검증, 출력 값 이스케이프, CSRF 토큰 사용)
-   **로그 및 모니터링**: 서비스의 보안 이벤트, 오류, 비정상적인 접근 시도 등을 지속적으로 로그로 기록하고 모니터링하여 잠재적 위협을 조기에 감지하고 대응합니다.
